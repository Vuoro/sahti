<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sahti example</title>

    <style>
      html {
        color: white;
        background: black;
      }

      a {
        color: inherit;
      }

      canvas {
        width: 100vw;
        height: 100vh;
      }
    </style>

    <script
      defer
      src="https://unpkg.com/es-module-shims@0.10.1/dist/es-module-shims.js"
    ></script>
    <script type="importmap">
      {
        "imports": {
          "react": "https://cdn.skypack.dev/react",
          "react-dom": "https://cdn.skypack.dev/react-dom"
        }
      }
    </script>

    <script type="module">
      import { createElement, useEffect, Fragment } from "react";
      import { render } from "react-dom";

      import {
        Canvas,
        component,
        getContext,
        useAnimationFrame,
      } from "./main.react.js";

      const triangle = [
        [-1, -1, 0],
        [1, -1, 0],
        [-1, 1, 0],
      ];

      const Example = component({
        context: {
          triangle,
        },
        vertex: `
          void main() {
            gl_Position = vec4(triangle, 1.0);
          }
        `,
        fragment: `
          out vec4 pixelColor;
          
          void main() {
            pixelColor = vec4(1.0, 0.0, 0.0, 1.0);
          }
        `,
      });

      const App = () => {
        return createElement(Fragment, null, [
          createElement(Example),
          createElement(Canvas),
        ]);
      };

      render(createElement(App), document.getElementById("demo"));
    </script>
  </head>

  <body>
    <a href="https://github.com/vuoro/sahti">https://github.com/vuoro/sahti</a>
    <div id="demo"></div>
  </body>
</html>
